<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - liquid-5.0.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Liquid+template+engine">Liquid template engine</a>
    <li><a href="#label-Introduction">Introduction</a>
    <li><a href="#label-Why+you+should+use+Liquid">Why you should use Liquid</a>
    <li><a href="#label-What+does+it+look+like-3F">What does it look like?</a>
    <li><a href="#label-How+to+use+Liquid">How to use Liquid</a>
    <li><a href="#label-Error+Modes">Error Modes</a>
    <li><a href="#label-Undefined+variables+and+filters">Undefined variables and filters</a>
    <li><a href="#label-Usage+tracking">Usage tracking</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./History_md.html">History</a>
  
    <li><a href="./README_md.html">README</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.md">

<p><a href="http://travis-ci.org/Shopify/liquid"><img src="https://api.travis-ci.org/Shopify/liquid.svg?branch=master"></a> <a href="http://inch-ci.org/github/Shopify/liquid"><img src="http://inch-ci.org/github/Shopify/liquid.svg?branch=master"></a></p>

<h1 id="label-Liquid+template+engine"><a href="Liquid.html"><code>Liquid</code></a> template engine<span><a href="#label-Liquid+template+engine">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p><a href="CONTRIBUTING.md">Contributing guidelines</a></p>
</li><li>
<p><a href="History.md">Version history</a></p>
</li><li>
<p><a href="http://docs.shopify.com/themes/liquid-basics">Liquid documentation from Shopify</a></p>
</li><li>
<p><a href="https://github.com/Shopify/liquid/wiki">Liquid Wiki at GitHub</a></p>
</li><li>
<p><a href="http://liquidmarkup.org/">Website</a></p>
</li></ul>

<h2 id="label-Introduction">Introduction<span><a href="#label-Introduction">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="Liquid.html"><code>Liquid</code></a> is a template engine which was written with very specific requirements:</p>
<ul><li>
<p>It has to have beautiful and simple markup. Template engines which don&#39;t produce good looking markup are no fun to use.</p>
</li><li>
<p>It needs to be non evaling and secure. <a href="Liquid.html"><code>Liquid</code></a> templates are made so that users can edit them. You don&#39;t want to run code on your server which your users wrote.</p>
</li><li>
<p>It has to be stateless. Compile and render steps have to be separate so that the expensive parsing and compiling can be done once and later on you can just render it passing in a hash with local variables and objects.</p>
</li></ul>

<h2 id="label-Why+you+should+use+Liquid">Why you should use <a href="Liquid.html"><code>Liquid</code></a><span><a href="#label-Why+you+should+use+Liquid">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>You want to allow your users to edit the appearance of your application but don&#39;t want them to run <strong>insecure code on your server</strong>.</p>
</li><li>
<p>You want to render templates directly from the database.</p>
</li><li>
<p>You like smarty (PHP) style template engines.</p>
</li><li>
<p>You need a template engine which does HTML just as well as emails.</p>
</li><li>
<p>You don&#39;t like the markup of your current templating engine.</p>
</li></ul>

<h2 id="label-What+does+it+look+like-3F">What does it look like?<span><a href="#label-What+does+it+look+like-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>&lt;ul id=&quot;products&quot;&gt;
  {% for product in products %}
    &lt;li&gt;
      &lt;h2&gt;{{ product.name }}&lt;/h2&gt;
      Only {{ product.price | price }}

      {{ product.description | prettyprint | paragraph }}
    &lt;/li&gt;
  {% endfor %}
&lt;/ul&gt;</pre>

<h2 id="label-How+to+use+Liquid">How to use <a href="Liquid.html"><code>Liquid</code></a><span><a href="#label-How+to+use+Liquid">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Install <a href="Liquid.html"><code>Liquid</code></a> by adding <code>gem &#39;liquid&#39;</code> to your gemfile.</p>

<p><a href="Liquid.html"><code>Liquid</code></a> supports a very simple API based around the <a href="Liquid/Template.html"><code>Liquid::Template</code></a> class. For standard use you can just pass it the content of a file and call render with a parameters hash.</p>

<pre class="ruby"><span class="ruby-ivar">@template</span> = <span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">&quot;hi {{name}}&quot;</span>) <span class="ruby-comment"># Parses and compiles the template</span>
<span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-string">&#39;name&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;tobi&#39;</span>)                <span class="ruby-comment"># =&gt; &quot;hi tobi&quot;</span>
</pre>

<h3 id="label-Error+Modes">Error Modes<span><a href="#label-Error+Modes">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Setting the error mode of <a href="Liquid.html"><code>Liquid</code></a> lets you specify how strictly you want your templates to be interpreted. Normally the parser is very lax and will accept almost anything without error. Unfortunately this can make it very hard to debug and can lead to unexpected behaviour.</p>

<p><a href="Liquid.html"><code>Liquid</code></a> also comes with a stricter parser that can be used when editing templates to give better error messages when templates are invalid. You can enable this new parser like this:</p>

<pre class="ruby"><span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">error_mode</span> = <span class="ruby-value">:strict</span> <span class="ruby-comment"># Raises a SyntaxError when invalid syntax is used</span>
<span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">error_mode</span> = <span class="ruby-value">:warn</span> <span class="ruby-comment"># Adds errors to template.errors but continues as normal</span>
<span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">error_mode</span> = <span class="ruby-value">:lax</span> <span class="ruby-comment"># The default mode, accepts almost anything.</span>
</pre>

<p>If you want to set the error mode only on specific templates you can pass <code>:error_mode</code> as an option to <code>parse</code>: <code>ruby Liquid::Template.parse(source, :error_mode =&gt; :strict) </code> This is useful for doing things like enabling strict mode only in the theme editor.</p>

<p>It is recommended that you enable <code>:strict</code> or <code>:warn</code> mode on new apps to stop invalid templates from being created. It is also recommended that you use it in the template editors of existing apps to give editors better error messages.</p>

<h3 id="label-Undefined+variables+and+filters">Undefined variables and filters<span><a href="#label-Undefined+variables+and+filters">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>By default, the renderer doesn&#39;t raise or in any other way notify you if some variables or filters are missing, i.e. not passed to the <code>render</code> method. You can improve this situation by passing <code>strict_variables: true</code> and/or <code>strict_filters: true</code> options to the <code>render</code> method. When one of these options is set to true, all errors about undefined variables and undefined filters will be stored in <code>errors</code> array of a <code>Liquid::Template</code> instance. Here are some examples:</p>

<pre class="ruby"><span class="ruby-identifier">template</span> = <span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">&quot;{{x}} {{y}} {{z.a}} {{z.b}}&quot;</span>)
<span class="ruby-identifier">template</span>.<span class="ruby-identifier">render</span>({ <span class="ruby-string">&#39;x&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-string">&#39;z&#39;</span> <span class="ruby-operator">=&gt;</span> { <span class="ruby-string">&#39;a&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">2</span> } }, { <span class="ruby-value">strict_variables:</span> <span class="ruby-keyword">true</span> })
<span class="ruby-comment">#=&gt; &#39;1  2 &#39; # when a variable is undefined, it&#39;s rendered as nil</span>
<span class="ruby-identifier">template</span>.<span class="ruby-identifier">errors</span>
<span class="ruby-comment">#=&gt; [#&lt;Liquid::UndefinedVariable: Liquid error: undefined variable y&gt;, #&lt;Liquid::UndefinedVariable: Liquid error: undefined variable b&gt;]</span>
</pre>

<pre class="ruby"><span class="ruby-identifier">template</span> = <span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">&quot;{{x | filter1 | upcase}}&quot;</span>)
<span class="ruby-identifier">template</span>.<span class="ruby-identifier">render</span>({ <span class="ruby-string">&#39;x&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-string">&#39;foo&#39;</span> }, { <span class="ruby-value">strict_filters:</span> <span class="ruby-keyword">true</span> })
<span class="ruby-comment">#=&gt; &#39;&#39; # when at least one filter in the filter chain is undefined, a whole expression is rendered as nil</span>
<span class="ruby-identifier">template</span>.<span class="ruby-identifier">errors</span>
<span class="ruby-comment">#=&gt; [#&lt;Liquid::UndefinedFilter: Liquid error: undefined filter filter1&gt;]</span>
</pre>

<p>If you want to raise on a first exception instead of pushing all of them in <code>errors</code>, you can use <code>render!</code> method:</p>

<pre class="ruby"><span class="ruby-identifier">template</span> = <span class="ruby-constant">Liquid</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-string">&quot;{{x}} {{y}}&quot;</span>)
<span class="ruby-identifier">template</span>.<span class="ruby-identifier">render!</span>({ <span class="ruby-string">&#39;x&#39;</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-value">1</span>}, { <span class="ruby-value">strict_variables:</span> <span class="ruby-keyword">true</span> })
<span class="ruby-comment">#=&gt; Liquid::UndefinedVariable: Liquid error: undefined variable y</span>
</pre>

<h3 id="label-Usage+tracking">Usage tracking<span><a href="#label-Usage+tracking">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>To help track usages of a feature or code path in production, we have released opt-in usage tracking. To enable this, we provide an empty <code>Liquid:: Usage.increment</code> method which you can customize to your needs. The feature is well suited to <a href="https://github.com/Shopify/statsd-instrument">github.com/Shopify/statsd-instrument</a>. However, the choice of implementation is up to you.</p>

<p>Once you have enabled usage tracking, we recommend reporting any events through Github Issues that your system may be logging. It is highly likely this event has been added to consider deprecating or improving code specific to this event, so please raise any concerns.</p>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

